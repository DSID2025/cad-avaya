<div class="container">
  <h2>ğŸ“ Panel del Agente</h2>

  <!-- ConexiÃ³n -->
  <div class="connection">
    <input type="text" [(ngModel)]="extension" placeholder="ExtensiÃ³n del agente" [disabled]="isConnected" />
    <button (click)="connect()" [disabled]="isConnected">ğŸ”Œ Conectar</button>
    <button (click)="disconnect()" [disabled]="!isConnected">â Desconectar</button>
  </div>

  <!-- Estado de conexiÃ³n y llamada -->
  <div *ngIf="isConnected">
    <p>ğŸŸ¢ Conectado como <strong>{{ extension }}</strong></p>
    <p *ngIf="currentCallId">
      {{ inCall ? 'ğŸ“ En llamada activa' : 'ğŸ”” Llamada entrante' }} (callId: <strong>{{ currentCallId }}</strong>)
    </p>

    <!-- ğŸ“ BotÃ³n para buscar ubicaciÃ³n -->
    <button
      *ngIf="callerNumber && currentCallId"
      (click)="lookupLocation()">
      ğŸ“ Buscar ubicaciÃ³n
    </button>
  </div>

  <!-- Controles de llamada -->
  <div class="controls">
    <button (click)="answerCall()" [disabled]="!isConnected || !currentCallId || inCall">âœ… Tomar llamada</button>
    <button (click)="hangUp()" [disabled]="!inCall">âŒ Colgar</button>
    <button (click)="transferCall()" [disabled]="!inCall">ğŸ” Transferir</button>
    <button (click)="toggleHold()" [disabled]="!inCall">
      {{ isOnHold ? 'â–¶ï¸ Reanudar' : 'â¸ï¸ Hold' }}
    </button>
  </div>

  <!-- Log de eventos -->
  <h3>ğŸ§¾ Log de eventos</h3>
  <div class="log-box">
    <div *ngFor="let line of messages" class="log-line">{{ line }}</div>
  </div>
</div>
